(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{Iab2:function(t,e,n){var a,o;void 0===(o="function"==typeof(a=function(){"use strict";function e(t,e,n){var a=new XMLHttpRequest;a.open("GET",t),a.responseType="blob",a.onload=function(){c(a.response,e,n)},a.onerror=function(){console.error("could not download file")},a.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function a(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,c=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype?function(t,c,r){var i=o.URL||o.webkitURL,s=document.createElement("a");s.download=c=c||t.name||"download",s.rel="noopener","string"==typeof t?(s.href=t,s.origin===location.origin?a(s):n(s.href)?e(t,c,r):a(s,s.target="_blank")):(s.href=i.createObjectURL(t),setTimeout(function(){i.revokeObjectURL(s.href)},4e4),setTimeout(function(){a(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,o,c){if(o=o||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,c),o);else if(n(t))e(t,o,c);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){a(r)})}}:function(t,n,a,c){if((c=c||open("","_blank"))&&(c.document.title=c.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,a);var r="application/octet-stream"===t.type,i=/constructor/i.test(o.HTMLElement)||o.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||r&&i)&&"object"==typeof FileReader){var l=new FileReader;l.onloadend=function(){var t=l.result;t=s?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),c?c.location.href=t:location=t,c=null},l.readAsDataURL(t)}else{var b=o.URL||o.webkitURL,d=b.createObjectURL(t);c?c.location=d:location.href=d,c=null,setTimeout(function(){b.revokeObjectURL(d)},4e4)}});o.saveAs=c.saveAs=c,t.exports=c})?a.apply(e,[]):a)||(t.exports=o)},j1ZV:function(t,e,n){"use strict";n.r(e),n.d(e,"ComponentsModule",function(){return K});var a=n("tyNb"),o=n("XNiG"),c=n("1G5W"),r=n("aAC7"),i=n("3Pt+"),s=n("fXoL"),l=n("vkgz"),b=n("lJxs"),d=n("2Vo4"),u=n("qc5V");let p=(()=>{class t{constructor(t){this.apiService=t,this.localDataSubject=new d.a(null),this._localData=this.localDataSubject.asObservable()}fetchData(){return this.apiService.get("/timeseries.json").pipe(Object(l.a)(t=>{this.localDataSubject.next(t)}))}clearData(){this.localDataSubject.next(null)}getAllData(){return this._localData}getSummaryNumbers(){return this._localData.pipe(Object(b.a)(t=>{const e={confirmed:0,deaths:0,recovered:0,date:""};return t&&Object.keys(t).forEach(n=>{if(t[n]){const a=t[n][t[n].length-1];e.date=a.date,e.confirmed=e.confirmed+a.confirmed,e.deaths=e.deaths+a.deaths,e.recovered=e.recovered+a.recovered}}),e}))}getListCountries(){return this._localData.pipe(Object(b.a)(t=>t?Object.keys(t):[]))}getByCountryName(t){return this._localData.pipe(Object(b.a)(e=>{if(e&&e[t])return[...e[t]]}))}}return t.\u0275fac=function(e){return new(e||t)(s.Yb(u.a))},t.\u0275prov=s.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var h=n("/t3+"),m=n("NFeN"),f=n("kmnG"),g=n("d3UM"),y=n("ofXK"),v=n("Wp6s"),w=n("FKr1"),D=n("sYmb");function C(t,e){if(1&t&&(s.Ub(0,"mat-option",14),s.wc(1),s.Tb()),2&t){const t=e.$implicit;s.lc("value",t.id),s.Db(1),s.yc(" ",t.text," ")}}let O=(()=>{class t{constructor(t,e){this.covidDataStoreService=t,this.appSettingsService=e,this.destroy$=new o.a,this.totalConfirmed="N/A",this.totalRecovered="N/A",this.totalDeaths="N/A",this.lastUpdateDate="N/A",this.languages=r.c,this.langControl=new i.b(r.b)}ngOnInit(){this.covidDataStoreService.getSummaryNumbers().pipe(Object(c.a)(this.destroy$)).subscribe(t=>{this.totalConfirmed=t.confirmed.toLocaleString(),this.totalRecovered=t.recovered.toLocaleString(),this.totalDeaths=t.deaths.toLocaleString(),this.lastUpdateDate=t.date})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onChangeLang(t){t&&t.value&&this.appSettingsService.setLanguage(t.value)}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(p),s.Ob(r.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-components"]],decls:37,vars:14,consts:[[1,"header"],[1,"brand"],["src","assets/images/large-icon.png"],[1,"fill-remaining-space"],[1,"summary-wrap"],["title","Confirmed",1,"text-orange"],[1,"number"],["title","Deaths",1,"text-red"],[1,"info"],[1,"lang-wrap"],[3,"formControl","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["href","https://github.com/pomber/covid19"],["href","https://github.com/ngmikeng"],[3,"value"]],template:function(t,e){1&t&&(s.Ub(0,"mat-toolbar",0),s.Ub(1,"span",1),s.Pb(2,"img",2),s.wc(3," CHART COVID-19 "),s.Tb(),s.Pb(4,"span",3),s.Ub(5,"div",4),s.Ub(6,"mat-icon",5),s.wc(7,"sentiment_dissatisfied"),s.Tb(),s.Ub(8,"span",6),s.wc(9),s.Tb(),s.Ub(10,"mat-icon",7),s.wc(11,"sentiment_very_dissatisfied"),s.Tb(),s.Ub(12,"span",6),s.wc(13),s.Tb(),s.Tb(),s.Tb(),s.Ub(14,"mat-toolbar",8),s.Ub(15,"span"),s.wc(16),s.gc(17,"translate"),s.Tb(),s.Pb(18,"span",3),s.Ub(19,"div",9),s.Ub(20,"mat-form-field"),s.Ub(21,"mat-select",10),s.bc("selectionChange",function(t){return e.onChangeLang(t)}),s.vc(22,C,2,2,"mat-option",11),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(23,"mat-card"),s.Pb(24,"router-outlet"),s.Tb(),s.Ub(25,"mat-toolbar",8),s.Ub(26,"span"),s.wc(27),s.gc(28,"translate"),s.Ub(29,"a",12),s.wc(30,"@pomber/covid19"),s.Tb(),s.Tb(),s.Pb(31,"span",3),s.Ub(32,"span"),s.wc(33),s.gc(34,"translate"),s.Ub(35,"a",13),s.wc(36,"@ngmikeng"),s.Tb(),s.Tb(),s.Tb()),2&t&&(s.Db(9),s.xc(e.totalConfirmed),s.Db(4),s.xc(e.totalDeaths),s.Db(3),s.zc("",s.hc(17,8,"ROOT.LATEST_DATA_DATE"),": ",e.lastUpdateDate,""),s.Db(5),s.lc("formControl",e.langControl),s.Db(1),s.lc("ngForOf",e.languages),s.Db(5),s.yc("",s.hc(28,10,"ROOT.DATA_INFO")," "),s.Db(6),s.yc("",s.hc(34,12,"ROOT.FOLLOW_ME")," "))},directives:[h.a,m.a,f.b,g.a,i.h,i.c,y.k,v.a,a.b,w.e],pipes:[D.c],styles:[".header[_ngcontent-%COMP%]{background-color:#fff;border-bottom:1px solid #cdcdcd}.header[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{display:flex}.header[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;-webkit-animation:spin 4s linear infinite;animation:spin 4s linear infinite}@-webkit-keyframes spin{to{-webkit-transform:rotate(1turn)}}@keyframes spin{to{transform:rotate(1turn)}}.header[_ngcontent-%COMP%]   .summary-wrap[_ngcontent-%COMP%]{display:flex;align-items:center;line-height:1}.header[_ngcontent-%COMP%]   .summary-wrap[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{margin-left:3px;margin-right:10px}.header[_ngcontent-%COMP%]   .summary-wrap[_ngcontent-%COMP%]   .text-orange[_ngcontent-%COMP%]{color:purple}.header[_ngcontent-%COMP%]   .summary-wrap[_ngcontent-%COMP%]   .text-red[_ngcontent-%COMP%]{color:red}.header[_ngcontent-%COMP%]   .summary-wrap[_ngcontent-%COMP%]   .text-green[_ngcontent-%COMP%]{color:green}@media (max-width:768px){.header[_ngcontent-%COMP%]{font-size:1em;flex-direction:column}}.info[_ngcontent-%COMP%]{font-size:11px;border-top:1px solid #cdcdcd;border-bottom:1px solid #cdcdcd;height:40px}.fill-remaining-space[_ngcontent-%COMP%]{flex:1 1 auto}.lang-wrap[_ngcontent-%COMP%]     .mat-form-field-infix{width:100px}"]}),t})();var T=n("JX91"),_=n("Iab2"),M=n("+0xr"),S=n("M9IT"),x=n("cHiH"),U=n("jaxi"),P=n("qFsG"),j=n("/1cH"),E=n("qPpl"),R=n("bTqV");function k(t,e){if(1&t&&(s.Ub(0,"mat-option",26),s.wc(1),s.Tb()),2&t){const t=e.$implicit;s.lc("value",t),s.Db(1),s.yc(" ",t," ")}}function L(t,e){1&t&&(s.Ub(0,"th",27),s.wc(1),s.gc(2,"translate"),s.Tb()),2&t&&(s.Db(1),s.yc(" ",s.hc(2,1,"HOME.DATE")," "))}function A(t,e){if(1&t&&(s.Ub(0,"td",28),s.wc(1),s.gc(2,"date"),s.Tb()),2&t){const t=e.$implicit;s.Db(1),s.yc(" ",s.ic(2,1,t.date,"dd/MM/yyyy")," ")}}function H(t,e){1&t&&(s.Ub(0,"th",27),s.wc(1),s.gc(2,"translate"),s.Tb()),2&t&&(s.Db(1),s.yc(" ",s.hc(2,1,"HOME.CONFIRMED")," "))}function B(t,e){if(1&t&&(s.Ub(0,"td",28),s.wc(1),s.Tb()),2&t){const t=e.$implicit;s.Db(1),s.yc(" ",t.confirmed," ")}}function $(t,e){1&t&&(s.Ub(0,"th",27),s.wc(1),s.gc(2,"translate"),s.Tb()),2&t&&(s.Db(1),s.yc(" ",s.hc(2,1,"HOME.RECOVERED")," "))}function F(t,e){if(1&t&&(s.Ub(0,"td",28),s.wc(1),s.Tb()),2&t){const t=e.$implicit;s.Db(1),s.yc(" ",t.recovered," ")}}function N(t,e){1&t&&(s.Ub(0,"th",27),s.wc(1),s.gc(2,"translate"),s.Tb()),2&t&&(s.Db(1),s.yc(" ",s.hc(2,1,"HOME.DEATHS")," "))}function I(t,e){if(1&t&&(s.Ub(0,"td",28),s.wc(1),s.Tb()),2&t){const t=e.$implicit;s.Db(1),s.yc(" ",t.deaths," ")}}function V(t,e){1&t&&s.Pb(0,"tr",29)}function z(t,e){1&t&&s.Pb(0,"tr",30)}const X=function(){return[10,20,30]},W=[{path:"",component:O,children:[{path:"home",component:(()=>{class t{constructor(t){this.covidDataStoreService=t,this.selectedCountry="Vietnam",this.countryControl=new i.b(this.selectedCountry),this.displayedColumns=["date","confirmed","recovered","deaths"],this.dataSource=new M.k([]),this.dataType="confirmed"}ngOnInit(){this.covidDataStoreService.fetchData().subscribe(),this.covidDataStoreService.getListCountries().subscribe(t=>{this.countries=t}),this.allData$=this.covidDataStoreService.getAllData(),this.allData$.subscribe(t=>{this._allData=t}),this.countriesOpts$=this.countryControl.valueChanges.pipe(Object(T.a)(""),Object(b.a)(t=>this._filter(t))),this._handleLoadDataByCountry(this.selectedCountry)}ngAfterViewInit(){this.dataSource.paginator=this.paginator}_filter(t){const e=t.toLowerCase();return this.countries.filter(t=>t.toLowerCase().includes(e))}onSelectCountry(t){t&&t.option&&t.option.value&&(this.selectedCountry=t.option.value,this._handleLoadDataByCountry(t.option.value))}exportCSV(){if(this.selectedCountry&&this._dataByCountry&&this._dataByCountry.length>0){const t=Object.keys(this._dataByCountry[0]),e=[];this._dataByCountry.forEach(t=>{e.push([...Object.values(t)])});const n=[t.join(","),e.join("\n")].join("\n"),a=new Blob([n],{type:"text/csv;charset=utf-8"});Object(_.saveAs)(a,`covid19_${this.selectedCountry}_${(new Date).getTime()}.csv`)}}exportWorldCSV(){if(this._allData){const t=Object.keys(this._allData),e=["country",...Object.keys(this._allData.US[0])],n=[];t.forEach(t=>{let e=t;if(e.indexOf("Korea, South")>-1&&(e="South Korea"),this._allData[t]){const a=this._allData[t];n.push([e,...Object.values(a[a.length-1])])}});const a=[e.join(","),n.join("\n")].join("\n"),o=new Blob([a],{type:"text/csv;charset=utf-8"});Object(_.saveAs)(o,`covid19_World_${(new Date).getTime()}.csv`)}}_handleLoadDataByCountry(t){this.dataByCountry$=this.covidDataStoreService.getByCountryName(t).pipe(Object(b.a)(t=>t&&t.length>0?t.sort((t,e)=>new Date(e.date).getTime()-new Date(t.date).getTime()):t)).pipe(Object(l.a)(t=>{t&&(this._dataByCountry=t,this.dataSource.data=t)}))}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(p))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-home"]],viewQuery:function(t,e){if(1&t&&s.Ac(S.a,1),2&t){let t;s.oc(t=s.cc())&&(e.paginator=t.first)}},decls:50,vars:36,consts:[[3,"chartData","dataType"],[1,"types-data-buttons"],["name","dataType",3,"ngModel","ngModelChange"],["value","confirmed"],["value","deaths"],["value","recovered"],[1,"example-form"],[1,"example-full-width"],["type","text","matInput","",3,"placeholder","formControl","matAutocomplete"],["autoActiveFirstOption","",3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"chartData"],[1,"table-buttons"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","secondary",3,"click"],["mat-table","",1,"mat-elevation-z8","full-width",3,"dataSource"],["matColumnDef","date"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","confirmed"],["matColumnDef","recovered"],["matColumnDef","deaths"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],[3,"value"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,e){if(1&t&&(s.Ub(0,"div"),s.Pb(1,"app-world-map-chart",0),s.gc(2,"async"),s.Ub(3,"div",1),s.Ub(4,"mat-button-toggle-group",2),s.bc("ngModelChange",function(t){return e.dataType=t}),s.Ub(5,"mat-button-toggle",3),s.wc(6),s.gc(7,"translate"),s.Tb(),s.Ub(8,"mat-button-toggle",4),s.wc(9),s.gc(10,"translate"),s.Tb(),s.Ub(11,"mat-button-toggle",5),s.wc(12),s.gc(13,"translate"),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Pb(14,"hr"),s.Ub(15,"form",6),s.Ub(16,"mat-form-field",7),s.Pb(17,"input",8),s.gc(18,"translate"),s.Ub(19,"mat-autocomplete",9,10),s.bc("optionSelected",function(t){return e.onSelectCountry(t)}),s.vc(21,k,2,2,"mat-option",11),s.gc(22,"async"),s.Tb(),s.Tb(),s.Tb(),s.Pb(23,"hr"),s.Ub(24,"div"),s.Pb(25,"app-multi-data-chart",12),s.gc(26,"async"),s.Tb(),s.Ub(27,"div",13),s.Ub(28,"button",14),s.bc("click",function(){return e.exportCSV()}),s.wc(29),s.gc(30,"translate"),s.Tb(),s.Ub(31,"button",15),s.bc("click",function(){return e.exportWorldCSV()}),s.wc(32),s.gc(33,"translate"),s.Tb(),s.Tb(),s.Ub(34,"table",16),s.Sb(35,17),s.vc(36,L,3,3,"th",18),s.vc(37,A,3,4,"td",19),s.Rb(),s.Sb(38,20),s.vc(39,H,3,3,"th",18),s.vc(40,B,2,1,"td",19),s.Rb(),s.Sb(41,21),s.vc(42,$,3,3,"th",18),s.vc(43,F,2,1,"td",19),s.Rb(),s.Sb(44,22),s.vc(45,N,3,3,"th",18),s.vc(46,I,2,1,"td",19),s.Rb(),s.vc(47,V,1,0,"tr",23),s.vc(48,z,1,0,"tr",24),s.Tb(),s.Pb(49,"mat-paginator",25)),2&t){const t=s.pc(20);s.Db(1),s.lc("chartData",s.hc(2,17,e.allData$))("dataType",e.dataType),s.Db(3),s.lc("ngModel",e.dataType),s.Db(2),s.xc(s.hc(7,19,"HOME.CONFIRMED")),s.Db(3),s.xc(s.hc(10,21,"HOME.DEATHS")),s.Db(3),s.xc(s.hc(13,23,"HOME.RECOVERED")),s.Db(5),s.mc("placeholder",s.hc(18,25,"HOME.SELECT")),s.lc("formControl",e.countryControl)("matAutocomplete",t),s.Db(4),s.lc("ngForOf",s.hc(22,27,e.countriesOpts$)),s.Db(4),s.lc("chartData",s.hc(26,29,e.dataByCountry$)),s.Db(4),s.xc(s.hc(30,31,"HOME.EXPORT_COUNTRY")),s.Db(3),s.xc(s.hc(33,33,"HOME.EXPORT_WORLD")),s.Db(2),s.lc("dataSource",e.dataSource),s.Db(13),s.lc("matHeaderRowDef",e.displayedColumns),s.Db(1),s.lc("matRowDefColumns",e.displayedColumns),s.Db(1),s.lc("pageSizeOptions",s.nc(35,X))}},directives:[x.a,U.b,i.h,i.k,U.a,i.m,i.i,i.j,f.b,P.a,i.a,j.c,i.c,j.a,y.k,E.a,R.a,M.j,M.c,M.e,M.b,M.g,M.i,S.a,w.e,M.d,M.a,M.f,M.h],pipes:[y.b,D.c,y.e],styles:[".full-width[_ngcontent-%COMP%]{width:100%;color:#1eff00}.align-center[_ngcontent-%COMP%]{text-align:center}.types-data-buttons[_ngcontent-%COMP%]{text-align:center;font-size:14px}.types-data-buttons[_ngcontent-%COMP%]     .mat-button-toggle-appearance-standard .mat-button-toggle-label-content{line-height:35px}.table-buttons[_ngcontent-%COMP%]{margin-bottom:5px}.table-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:5px}"]}),t})()},{path:"",redirectTo:"home",pathMatch:"full"}]}];let q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({imports:[[a.a.forChild(W)],a.a]}),t})();var G=n("PCNd");let K=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({imports:[[G.a,q]]}),t})()}}]);