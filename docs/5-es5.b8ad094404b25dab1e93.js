function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{Iab2:function(t,e,n){var a,o;void 0===(o="function"==typeof(a=function(){"use strict";function e(t,e,n){var a=new XMLHttpRequest;a.open("GET",t),a.responseType="blob",a.onload=function(){r(a.response,e,n)},a.onerror=function(){console.error("could not download file")},a.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function a(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,r=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype?function(t,r,c){var i=o.URL||o.webkitURL,s=document.createElement("a");s.download=r=r||t.name||"download",s.rel="noopener","string"==typeof t?(s.href=t,s.origin===location.origin?a(s):n(s.href)?e(t,r,c):a(s,s.target="_blank")):(s.href=i.createObjectURL(t),setTimeout((function(){i.revokeObjectURL(s.href)}),4e4),setTimeout((function(){a(s)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,o,r){if(o=o||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,r),o);else if(n(t))e(t,o,r);else{var c=document.createElement("a");c.href=t,c.target="_blank",setTimeout((function(){a(c)}))}}:function(t,n,a,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,a);var c="application/octet-stream"===t.type,i=/constructor/i.test(o.HTMLElement)||o.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||c&&i)&&"object"==typeof FileReader){var l=new FileReader;l.onloadend=function(){var t=l.result;t=s?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=t:location=t,r=null},l.readAsDataURL(t)}else{var u=o.URL||o.webkitURL,d=u.createObjectURL(t);r?r.location=d:location.href=d,r=null,setTimeout((function(){u.revokeObjectURL(d)}),4e4)}});o.saveAs=r.saveAs=r,t.exports=r})?a.apply(e,[]):a)||(t.exports=o)},j1ZV:function(t,e,n){"use strict";n.r(e),n.d(e,"ComponentsModule",(function(){return G}));var a,o,r=n("tyNb"),c=n("lJxs"),i=n("fXoL"),s=n("vkgz"),l=n("2Vo4"),u=n("qc5V"),d=((a=function(){function t(e){_classCallCheck(this,t),this.apiService=e,this.localDataSubject=new l.a(null),this._localData=this.localDataSubject.asObservable()}return _createClass(t,[{key:"fetchData",value:function(){var t=this;return this.apiService.get("/timeseries.json").pipe(Object(s.a)((function(e){t.localDataSubject.next(e)})))}},{key:"clearData",value:function(){this.localDataSubject.next(null)}},{key:"getAllData",value:function(){return this._localData}},{key:"getSummaryNumbers",value:function(){return this._localData.pipe(Object(c.a)((function(t){var e={confirmed:0,deaths:0,recovered:0};return t&&Object.keys(t).forEach((function(n){if(t[n]){var a=t[n][t[n].length-1];e.confirmed=e.confirmed+a.confirmed,e.deaths=e.deaths+a.deaths,e.recovered=e.recovered+a.recovered}})),e})))}},{key:"getListCountries",value:function(){return this._localData.pipe(Object(c.a)((function(t){return t?Object.keys(t):[]})))}},{key:"getByCountryName",value:function(t){return this._localData.pipe(Object(c.a)((function(e){if(e&&e[t])return _toConsumableArray(e[t])})))}}]),t}()).\u0275fac=function(t){return new(t||a)(i.Wb(u.a))},a.\u0275prov=i.Ib({token:a,factory:a.\u0275fac,providedIn:"root"}),a),b=n("/t3+"),f=n("NFeN"),p=n("Wp6s"),m=n("ofXK"),h=((o=function(){function t(e){_classCallCheck(this,t),this.covidDataStoreService=e}return _createClass(t,[{key:"ngOnInit",value:function(){this.totalConfirmed$=this.covidDataStoreService.getSummaryNumbers().pipe(Object(c.a)((function(t){return t.confirmed.toLocaleString()}))),this.totalRecovered$=this.covidDataStoreService.getSummaryNumbers().pipe(Object(c.a)((function(t){return t.recovered.toLocaleString()}))),this.totalDeaths$=this.covidDataStoreService.getSummaryNumbers().pipe(Object(c.a)((function(t){return t.deaths.toLocaleString()})))}}]),t}()).\u0275fac=function(t){return new(t||o)(i.Mb(d))},o.\u0275cmp=i.Gb({type:o,selectors:[["app-components"]],decls:27,vars:9,consts:[[1,"header"],[1,"fill-remaining-space"],[1,"summary-wrap"],["title","Confirmed",1,"text-orange"],[1,"number"],["title","Deaths",1,"text-red"],["title","Recovered",1,"text-green"],[1,"info"],["href","https://github.com/pomber/covid19"]],template:function(t,e){1&t&&(i.Sb(0,"mat-toolbar",0),i.Sb(1,"span"),i.sc(2,"CHART COVID-19"),i.Rb(),i.Nb(3,"span",1),i.Sb(4,"div",2),i.Sb(5,"mat-icon",3),i.sc(6,"sentiment_dissatisfied"),i.Rb(),i.Sb(7,"span",4),i.sc(8),i.dc(9,"async"),i.Rb(),i.Sb(10,"mat-icon",5),i.sc(11,"sentiment_very_dissatisfied"),i.Rb(),i.Sb(12,"span",4),i.sc(13),i.dc(14,"async"),i.Rb(),i.Sb(15,"mat-icon",6),i.sc(16,"sentiment_very_satisfied"),i.Rb(),i.Sb(17,"span",4),i.sc(18),i.dc(19,"async"),i.Rb(),i.Rb(),i.Rb(),i.Sb(20,"mat-card"),i.Nb(21,"router-outlet"),i.Rb(),i.Sb(22,"mat-toolbar",7),i.Sb(23,"span"),i.sc(24,"Source data from "),i.Sb(25,"a",8),i.sc(26,"@pomber/covid19"),i.Rb(),i.Rb(),i.Rb()),2&t&&(i.Cb(8),i.tc(i.ec(9,3,e.totalConfirmed$)),i.Cb(5),i.tc(i.ec(14,5,e.totalDeaths$)),i.Cb(5),i.tc(i.ec(19,7,e.totalRecovered$)))},directives:[b.a,f.a,p.a,r.b],pipes:[m.b],styles:[".header[_ngcontent-%COMP%]{background-color:#fff}.header[_ngcontent-%COMP%], .info[_ngcontent-%COMP%]{border-bottom:1px solid #cdcdcd}.info[_ngcontent-%COMP%]{font-size:11px;border-top:1px solid #cdcdcd;height:40px}.fill-remaining-space[_ngcontent-%COMP%]{flex:1 1 auto}.summary-wrap[_ngcontent-%COMP%]{display:flex;align-items:center}.summary-wrap[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{margin-left:3px;margin-right:10px}.summary-wrap[_ngcontent-%COMP%]   .text-orange[_ngcontent-%COMP%]{color:purple}.summary-wrap[_ngcontent-%COMP%]   .text-red[_ngcontent-%COMP%]{color:red}.summary-wrap[_ngcontent-%COMP%]   .text-green[_ngcontent-%COMP%]{color:green}"]}),o),y=n("3Pt+"),v=n("JX91"),C=n("Iab2"),g=n("cHiH"),S=n("jaxi"),w=n("kmnG"),_=n("qFsG"),R=n("/1cH"),D=n("qPpl"),O=n("bTqV"),j=n("+0xr"),k=n("FKr1");function x(t,e){if(1&t&&(i.Sb(0,"mat-option",24),i.sc(1),i.Rb()),2&t){var n=e.$implicit;i.ic("value",n),i.Cb(1),i.uc(" ",n," ")}}function A(t,e){1&t&&(i.Sb(0,"th",25),i.sc(1," Date "),i.Rb())}function M(t,e){if(1&t&&(i.Sb(0,"td",26),i.sc(1),i.dc(2,"date"),i.Rb()),2&t){var n=e.$implicit;i.Cb(1),i.uc(" ",i.fc(2,1,n.date,"mediumDate")," ")}}function T(t,e){1&t&&(i.Sb(0,"th",25),i.sc(1," Confirmed "),i.Rb())}function L(t,e){if(1&t&&(i.Sb(0,"td",26),i.sc(1),i.Rb()),2&t){var n=e.$implicit;i.Cb(1),i.uc(" ",n.confirmed," ")}}function P(t,e){1&t&&(i.Sb(0,"th",25),i.sc(1," Recovered "),i.Rb())}function B(t,e){if(1&t&&(i.Sb(0,"td",26),i.sc(1),i.Rb()),2&t){var n=e.$implicit;i.Cb(1),i.uc(" ",n.recovered," ")}}function N(t,e){1&t&&(i.Sb(0,"th",25),i.sc(1," Deaths "),i.Rb())}function $(t,e){if(1&t&&(i.Sb(0,"td",26),i.sc(1),i.Rb()),2&t){var n=e.$implicit;i.Cb(1),i.uc(" ",n.deaths," ")}}function E(t,e){1&t&&i.Nb(0,"tr",27)}function I(t,e){1&t&&i.Nb(0,"tr",28)}var H,U,F,V=[{path:"",component:h,children:[{path:"home",component:(H=function(){function t(e){_classCallCheck(this,t),this.covidDataStoreService=e,this.selectedCountry="Vietnam",this.countryControl=new y.b(this.selectedCountry),this.displayedColumns=["date","confirmed","recovered","deaths"],this.dataType="confirmed"}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.covidDataStoreService.fetchData().subscribe(),this.covidDataStoreService.getListCountries().subscribe((function(e){t.countries=e})),this.allData$=this.covidDataStoreService.getAllData(),this.countriesOpts$=this.countryControl.valueChanges.pipe(Object(v.a)(""),Object(c.a)((function(e){return t._filter(e)}))),this._handleLoadDataByCountry(this.selectedCountry)}},{key:"_filter",value:function(t){var e=t.toLowerCase();return this.countries.filter((function(t){return t.toLowerCase().includes(e)}))}},{key:"onSelectCountry",value:function(t){t&&t.option&&t.option.value&&(this.selectedCountry=t.option.value,this._handleLoadDataByCountry(t.option.value))}},{key:"exportCSV",value:function(){if(console.log(this._dataByCountry),this.selectedCountry&&this._dataByCountry&&this._dataByCountry.length>0){var t=Object.keys(this._dataByCountry[0]),e=[];this._dataByCountry.forEach((function(t){e.push(_toConsumableArray(Object.values(t)))}));var n=[t.join(","),e.join("\n")].join("\n"),a=new Blob([n],{type:"text/csv;charset=utf-8"});Object(C.saveAs)(a,"covid19_".concat(this.selectedCountry,"_").concat((new Date).getTime(),".csv"))}}},{key:"_handleLoadDataByCountry",value:function(t){var e=this;this.dataByCountry$=this.covidDataStoreService.getByCountryName(t).pipe(Object(c.a)((function(t){return t&&t.length>0?t.sort((function(t,e){return new Date(e.date).getTime()-new Date(t.date).getTime()})):t}))).pipe(Object(s.a)((function(t){e._dataByCountry=t})))}}]),t}(),H.\u0275fac=function(t){return new(t||H)(i.Mb(d))},H.\u0275cmp=i.Gb({type:H,selectors:[["app-home"]],decls:42,vars:18,consts:[[3,"chartData","dataType"],[1,"align-center"],["name","dataType",3,"ngModel","ngModelChange"],["value","confirmed"],["value","deaths"],["value","recovered"],[1,"example-form"],[1,"example-full-width"],["type","text","placeholder","Search Country","matInput","",3,"formControl","matAutocomplete"],["autoActiveFirstOption","",3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"chartData"],[1,""],["mat-raised-button","","color","primary",3,"click"],["mat-table","",1,"mat-elevation-z8","full-width",3,"dataSource"],["matColumnDef","date"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","confirmed"],["matColumnDef","recovered"],["matColumnDef","deaths"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"value"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,e){if(1&t&&(i.Sb(0,"div"),i.Nb(1,"app-world-map-chart",0),i.dc(2,"async"),i.Sb(3,"div",1),i.Sb(4,"mat-button-toggle-group",2),i.ac("ngModelChange",(function(t){return e.dataType=t})),i.Sb(5,"mat-button-toggle",3),i.sc(6,"Confirmed"),i.Rb(),i.Sb(7,"mat-button-toggle",4),i.sc(8,"Deaths"),i.Rb(),i.Sb(9,"mat-button-toggle",5),i.sc(10,"Recovered"),i.Rb(),i.Rb(),i.Rb(),i.Rb(),i.Nb(11,"hr"),i.Sb(12,"form",6),i.Sb(13,"mat-form-field",7),i.Nb(14,"input",8),i.Sb(15,"mat-autocomplete",9,10),i.ac("optionSelected",(function(t){return e.onSelectCountry(t)})),i.rc(17,x,2,2,"mat-option",11),i.dc(18,"async"),i.Rb(),i.Rb(),i.Rb(),i.Nb(19,"hr"),i.Sb(20,"div"),i.Nb(21,"app-multi-data-chart",12),i.dc(22,"async"),i.Rb(),i.Sb(23,"div",13),i.Sb(24,"button",14),i.ac("click",(function(){return e.exportCSV()})),i.sc(25,"Export CSV"),i.Rb(),i.Rb(),i.Sb(26,"table",15),i.dc(27,"async"),i.Qb(28,16),i.rc(29,A,2,0,"th",17),i.rc(30,M,3,4,"td",18),i.Pb(),i.Qb(31,19),i.rc(32,T,2,0,"th",17),i.rc(33,L,2,1,"td",18),i.Pb(),i.Qb(34,20),i.rc(35,P,2,0,"th",17),i.rc(36,B,2,1,"td",18),i.Pb(),i.Qb(37,21),i.rc(38,N,2,0,"th",17),i.rc(39,$,2,1,"td",18),i.Pb(),i.rc(40,E,1,0,"tr",22),i.rc(41,I,1,0,"tr",23),i.Rb()),2&t){var n=i.kc(16);i.Cb(1),i.ic("chartData",i.ec(2,10,e.allData$))("dataType",e.dataType),i.Cb(3),i.ic("ngModel",e.dataType),i.Cb(10),i.ic("formControl",e.countryControl)("matAutocomplete",n),i.Cb(3),i.ic("ngForOf",i.ec(18,12,e.countriesOpts$)),i.Cb(4),i.ic("chartData",i.ec(22,14,e.dataByCountry$)),i.Cb(5),i.ic("dataSource",i.ec(27,16,e.dataByCountry$)),i.Cb(14),i.ic("matHeaderRowDef",e.displayedColumns),i.Cb(1),i.ic("matRowDefColumns",e.displayedColumns)}},directives:[g.a,S.b,y.h,y.k,S.a,y.m,y.i,y.j,w.b,_.a,y.a,R.c,y.c,R.a,m.k,D.a,O.a,j.j,j.c,j.e,j.b,j.g,j.i,k.f,j.d,j.a,j.f,j.h],pipes:[m.b,m.e],styles:[".full-width[_ngcontent-%COMP%]{width:100%;color:#1eff00}.align-center[_ngcontent-%COMP%]{text-align:center}"]}),H)},{path:"",redirectTo:"home",pathMatch:"full"}]}],q=((U=function t(){_classCallCheck(this,t)}).\u0275mod=i.Kb({type:U}),U.\u0275inj=i.Jb({factory:function(t){return new(t||U)},imports:[[r.a.forChild(V)],r.a]}),U),J=n("PCNd"),G=((F=function t(){_classCallCheck(this,t)}).\u0275mod=i.Kb({type:F}),F.\u0275inj=i.Jb({factory:function(t){return new(t||F)},imports:[[J.a,q]]}),F)}}]);